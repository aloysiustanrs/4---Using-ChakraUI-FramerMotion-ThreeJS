---
title: Discord Bot made with Python
date: "September 29, 2022"
description: Learn how I created my own custom discord bot using Python
thumbnailUrl: "/discord_bot/discord_bot.png"
---
<iframe
  width="100%"
  height="315"
  src="https://www.youtube.com/embed/y881t8ilMyc"
  frameBorder="0"
  allowFullScreen
></iframe>
\
In this blog, I will share how I created my my own discord bot using <TextWithLink text="discord.py" link="https://github.com/Rapptz/discord.py" /> which is a API wrapper for Discord so that I can create the discord API more easily with Python.
\
\
If there is any information that is unclear in this blog, you can refer to my Github repository of this project: <TextWithLink text="Github Link" link="https://github.com/aloysiustanrs/all-crypto" /> or my youtube video above.

<br />

<Horizontal />

<Header>Why am I creating a discord bot?</Header>

&nbsp; 1. Practice my python skills

&nbsp; 2. Create a bot which has customised features 

&nbsp; 3. I can name the bot whatever I want :)

<Horizontal />

<Header>How to create discord bot?</Header>

Go to <TextWithLink text="Discord Developer Portal" link="https://discord.com/developers/applications" /> and create a new application.
<br />
Go to 'Bot' tab and create a new bot, enabling all 'Privileged Gateway Intents'
<br />
Go to 'OAuth2' tab > General: Select the 'In-app Authorization' > Scopes: Select 'bot' & 'applications.commands' > Bot Permissions: Administrator
<br />
Go to 'OAuth2' tab > URL Generator > Scopes: Select 'bot' > Copy link and paste onto browser > Add the bot to your discord channel

<Horizontal />

<Header>Coding the bot</Header>

In order to code the bot, I will be using the <TextWithLink text="discord.py" link="https://github.com/Rapptz/discord.py" /> so that it is easier to code out the discord bot in Python.
<SubHeader>
Features of the bot
</SubHeader>
&nbsp; 1. Anime recommendation 

&nbsp; 2. Clear Messages

&nbsp; 3. Play music

<br />
I will explain how I implement these features with the bot below.

<Horizontal />

<Header>Anime recommendation</Header>
<SubHeader>
Why this feature?
</SubHeader>
I have a discord channel with my friends and we like to watch anime. However, as a long time anime fan, I have already watched alot of anime.
<br />
Therefore, I thought of adding a feature to the discord bot where with one command, I can have a random anime recommended to me with all its details and I might consider watching it.
<br />

<SubHeader>
How?
</SubHeader>

<Image
  src="/blog-images/discord_bot/anime_code.png"
  alt="anime code"
/>
<br />
In order to obtain anime recommendations, I used the <TextWithLink text="Jikan API" link="https://jikan.moe/" /> which is an open-source API with anime data.
<br />
I will be using the random anime API endpoint which will display a list of data containing details from a random anime.
<br />
I used the <TextWithLink text="requests" link="https://requests.readthedocs.io/en/latest/" /> which extracts the *JSON* data from the API endpoint.
<br / >
From the data extracted, I will extract important details of the random anime(image, title, description, etc.) into their variables. 
<br / >
Then combine the details to a string, formatting it nicely, and return the string from the function.
<br />

<SubHeader>
Results
</SubHeader>

<Image
  src="/blog-images/discord_bot/anime_command.png"
  alt="anime code"
/>
<br />
After calling the '!anime' command, EeyoreBot replies with a 'One Piece' movie recommendation. Cool!


<Horizontal/>

<Header>Clear Messages</Header>

<SubHeader>
Why this feature?
</SubHeader>

<Image
  src="/blog-images/discord_bot/delete_one.png"
  alt="anime code"
/>

<br />

Sometimes, channel become too messy with alot of messages. However there is no function to clear alot of messages at a time in discord. So I can only delete messages one at a time.

<br />

Therefore, this feature allows us to delete many messages with just a command.

<SubHeader>Code</SubHeader>

<Image
  src="/blog-images/discord_bot/delete_code.png"
  alt="Delete messages code"
/>

<br />

In order to organise code, I created a 'Admin' Cog, which basically groups commands under a class.

<br />

After typing '!delete' command, the bot will ask 'Type 'yes' of you are sure' to prevent any accidental deletion.

<br/ >

Using discord.py's bot.wait_for function, the bot will wait for a message from the same channel and from the same person that called the command.

<br />

If response is ....
- 'yes' &rarr; x number of messages ('limit' number in code) will be deleted using discord.py's channel.purge() function
- *No messages* within 5 seconds &rarr; 'Time out! Request cancelled'
- Message not 'yes' &rarr; 'Request cancelled'

<SubHeader>Results</SubHeader>

<div style={{display:'flex', gap:'5%'}}>

<Image
  src="/blog-images/discord_bot/delete_command.png"
  alt="Delete messages code"
/>

<Image
  src="/blog-images/discord_bot/deleted.png"
  alt="Delete messages code"
/>

</div>

<br />

After typing the command '!delete', the bot will ask for confirmation and if 'yes' is replied the bot will delete 10 messages.

<br />

<Image
  src="/blog-images/discord_bot/timeout_requestcancelled.png"
  alt="Timeout and request cancelled"
/>

<br />

No message sent within 5 seconds &rarr; 'Timeout! Request cancelled'

<br />

Any message that is not 'yes' &rarr; 'Request cancelled'

<br />

<Horizontal />

<Header>Play Music</Header>

<SubHeader>Why this feature?</SubHeader>

Being able to listen to music with my friends while chilling

<SubHeader>Prerequisites</SubHeader>

- Install <TextWithLink text="PyNaCl" link="https://pypi.org/project/PyNaCl/" />
- Add <TextWithLink text="FFMPEG" link="https://ffmpeg.org/" /> to Windows path using Environment variables by following this <TextWithLink text="guide" link="https://www.thewindowsclub.com/how-to-install-ffmpeg-on-windows-10" />

<SubHeader>Code</SubHeader>
